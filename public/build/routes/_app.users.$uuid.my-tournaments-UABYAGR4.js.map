{
  "version": 3,
  "sources": ["../../../app/routes/_app.users.$uuid.my-tournaments.tsx"],
  "sourcesContent": ["import { json, type LoaderFunction } from \"@remix-run/node\";\nimport { useLoaderData } from \"@remix-run/react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Card, Result, Space } from \"antd\";\nimport { InboxOutlined } from \"@ant-design/icons\";\nimport * as APIServer from \"~/api\";\nimport { TournamentGrid } from \"~/components/pages/Tournament\";\nimport { useContext } from \"react\";\nimport { AuthContext } from \"~/contexts\";\nimport { getSessionFromRequest } from \"~/session.server\";\nimport jwt_decode from \"jwt-decode\";\nimport { joinTournaments } from \"~/utils/helper\";\n\nexport const loader: LoaderFunction = async ({ params, request }) => {\n  const session = await getSessionFromRequest(request);\n  const { uuid } = params;\n  const accessToken = session.get(\"accessToken\");\n  let uuidUser = \"\" as string;\n  let tournaments: any[] = [];\n  let joinedTournaments: any[] = [];\n  let transformedJoinedTournaments: any[] = [];\n  if (uuid) {\n    try {\n      const tournamentRes = await APIServer.clientFromSession(session).request(\n        APIServer.getAllTournamentByOrganizer()\n      );\n      if (tournamentRes.data) {\n        tournaments = tournamentRes.data;\n      }\n    } catch (e) {\n      console.log(\"e\", e);\n    }\n  }\n\n  if (accessToken) {\n    const accessTokenDecoded: any = jwt_decode(accessToken);\n    uuidUser = accessTokenDecoded.sub;\n    try {\n      const tournamentRes = await APIServer.clientFromSession().request(\n        APIServer.getJoinedTournament(uuidUser)\n      );\n      if (tournamentRes.data) {\n        joinedTournaments = tournamentRes.data;\n      }\n\n      transformedJoinedTournaments = joinedTournaments.map((item) => {\n        return {\n          id: item.tournament.id,\n          name: item.tournament.name,\n          nameEn: item.tournament.nameEn,\n          discordUrl: item.tournament.discordUrl,\n          registrationStartDate: item.tournament.registrationStartDate,\n          registrationEndDate: item.tournament.registrationEndDate,\n          startDate: item.tournament.startDate,\n          endDate: item.tournament.endDate,\n          maxTeam: item.tournament.maxTeam,\n          playerCount: item.tournament.playerCount,\n          additionalPlayerCount: item.tournament.additionalPlayerCount,\n          type: item.tournament.type,\n          status: item.tournament.status,\n          finalRoundLocation: item.tournament.finalRoundLocation,\n          finalRoundLocationEn: item.tournament.finalRoundLocationEn,\n          prize: item.tournament.prize,\n          description: item.tournament.description,\n          descriptionEn: item.tournament.descriptionEn,\n          qualificationRules: item.tournament.qualificationRules,\n          qualificationRulesEn: item.tournament.qualificationRulesEn,\n          isOnline: item.tournament.isOnline,\n          bannerImageUrl: item.tournament.bannerImageUrl,\n          thumbnailImageUrl: item.tournament.thumbnailImageUrl,\n          remark: item.tournament.remark,\n          isKycRequired: item.tournament.isKycRequired,\n          isDiscordIdRequired: item.tournament.isDiscordIdRequired,\n          isEmailRequired: item.tournament.isEmailRequired,\n          isPhoneNumberRequired: item.tournament.isPhoneNumberRequired,\n          isIgnRequired: item.tournament.isIgnRequired,\n          requirementFields: item.tournament.requirementFields,\n          organizerId: item.tournament.organizerId,\n          gameId: item.tournament.gameId,\n          organizer: item.tournament.organizer,\n          game: item.tournament.game,\n          createdDate: item.tournament.createdDate,\n          updatedDate: item.tournament.updatedDate,\n        };\n      });\n      tournaments = joinTournaments(tournaments, transformedJoinedTournaments);\n    } catch (e) {\n      console.log(\"e\", e);\n    }\n  }\n\n  return json({ uuid, tournaments });\n};\n\nexport default function UserMyTournaments() {\n  const { user } = useContext(AuthContext);\n  const { uuid, tournaments } = useLoaderData();\n  const { t } = useTranslation();\n\n  const draftTournaments = tournaments.filter(\n    (tournament: any) => tournament.status === \"draft\"\n  );\n  const pendingTournaments = tournaments.filter(\n    (tournament: any) => tournament.status === \"pending\"\n  );\n  const approvedTournaments = tournaments.filter(\n    (tournament: any) =>\n      tournament.status !== \"draft\" &&\n      tournament.status !== \"pending\" &&\n      tournament.status !== \"rejected\"\n  );\n\n  return !tournaments.length ? (\n    <Card style={{ borderRadius: 10 }}>\n      <Result icon={<InboxOutlined />} title={t(\"no past tournament\")} />\n    </Card>\n  ) : tournaments === null ? (\n    <TournamentGrid loading data={null} />\n  ) : (\n    <Space size={50} direction=\"vertical\" style={{ display: \"flex\" }}>\n      {user && user.uuid === uuid && draftTournaments.length ? (\n        <TournamentGrid data={draftTournaments} title={t(\"draft\")} />\n      ) : (\n        <></>\n      )}\n      {user && user.uuid === uuid && pendingTournaments.length ? (\n        <TournamentGrid data={pendingTournaments} title={t(\"pending\")} />\n      ) : (\n        <></>\n      )}\n      {approvedTournaments.length && (\n        <TournamentGrid\n          data={approvedTournaments}\n          title={user && user.uuid === uuid ? t(\"approved\") : undefined}\n        />\n      )}\n    </Space>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,kBAA0C;AAO1C,IAAAA,gBAA2B;AAE3B,qBAAsC;AAyGlB;AApBL,SAAR,oBAAqC;AAC1C,QAAM,EAAE,KAAK,QAAI,0BAAW,WAAW;AACvC,QAAM,EAAE,MAAM,YAAY,IAAI,cAAc;AAC5C,QAAM,EAAE,EAAE,IAAI,eAAe;AAE7B,QAAM,mBAAmB,YAAY;AAAA,IACnC,CAAC,eAAoB,WAAW,WAAW;AAAA,EAC7C;AACA,QAAM,qBAAqB,YAAY;AAAA,IACrC,CAAC,eAAoB,WAAW,WAAW;AAAA,EAC7C;AACA,QAAM,sBAAsB,YAAY;AAAA,IACtC,CAAC,eACC,WAAW,WAAW,WACtB,WAAW,WAAW,aACtB,WAAW,WAAW;AAAA,EAC1B;AAEA,SAAO,CAAC,YAAY,SAClB,mDAAC,gBAAK,OAAO,EAAE,cAAc,GAAG,GAC9B,6DAAC,kBAAO,MAAM,mDAAC,2BAAD;AAAA;AAAA;AAAA;AAAA,SAAe,GAAI,OAAO,EAAE,oBAAoB,KAA9D;AAAA;AAAA;AAAA;AAAA,SAAiE,KADnE;AAAA;AAAA;AAAA;AAAA,SAEA,IACE,gBAAgB,OAClB,mDAAC,kBAAe,SAAO,MAAC,MAAM,QAA9B;AAAA;AAAA;AAAA;AAAA,SAAoC,IAEpC,mDAAC,iBAAM,MAAM,IAAI,WAAU,YAAW,OAAO,EAAE,SAAS,OAAO,GAC5D;AAAA,YAAQ,KAAK,SAAS,QAAQ,iBAAiB,SAC9C,mDAAC,kBAAe,MAAM,kBAAkB,OAAO,EAAE,OAAO,KAAxD;AAAA;AAAA;AAAA;AAAA,WAA2D,IAE3D;AAAA;AAAA;AAAA;AAAA,WAAE;AAAA,IAEH,QAAQ,KAAK,SAAS,QAAQ,mBAAmB,SAChD,mDAAC,kBAAe,MAAM,oBAAoB,OAAO,EAAE,SAAS,KAA5D;AAAA;AAAA;AAAA;AAAA,WAA+D,IAE/D;AAAA;AAAA;AAAA;AAAA,WAAE;AAAA,IAEH,oBAAoB,UACnB;AAAA,MAAC;AAAA;AAAA,QACC,MAAM;AAAA,QACN,OAAO,QAAQ,KAAK,SAAS,OAAO,EAAE,UAAU,IAAI;AAAA;AAAA,MAFtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAGA;AAAA,OAfJ;AAAA;AAAA;AAAA;AAAA,SAiBA;AAEJ;",
  "names": ["import_react"]
}
